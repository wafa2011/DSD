<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="UTF-8">
<meta name="design" content="mon projet">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
    <script src=""></script>
</head>
<body>
    <body>
      <header class="header">
         <img class="img" src="images\logo.png" alt="DSR">
        
         
		<nav>
		<ul class="container">
			<li><a href="index.html"> SignUp / SignIn</a></li>
			<li><a href="publication.html">Publish a contract</a></li>
			<li><a href="aboutus.html">About us</a></li>
		    <li><a href="#contact">Documentation</a></li>
		</ul>
		
		</nav>
	</header>
	<main>
<table border="1">
    <tbody>
        <tr>
		<!----   Sign Up              ------>
            <td> 	<center><h3>Sign Up</h3></center>
			<table><tr>
			<td width="20px"> <p>Provider Public Address:</p>
			</td>
			<td width="300px"> <input type="text" name="nom" id="address"/></p>
			</td>
			</tr><tr>
			<td><p>Entreprise Name:
			</td>
			<td><input type="text" name="Ename" id="Ename"/></p>
			</td>
			</tr><tr>
			<td><p>Entreprise Domaine: 
			</td>
			<td>  <input type="text" name="Edomaine" id="Edomaine" /></p>
			</td>
			</tr><tr>
			<td><p>Entreprise Description:  
			</td>
			<td><input type="text" name="Edescription" id="Edescription"/></p>
			</td>
			</tr><tr>
			<td>
			</td>
			<td><p><input type="submit" value="SignUp" id="SignUp"></p>
			
			</td></tr>
			
			
			</tr></table>
			
			  
			
			 
			 
			</td>
		<!----     sign in              ------>
		
            <td><h3><center>Sign In</h3></center>
			<table><tr>
			<td> <p>Email:
			</td>
			<td> <input type="text" name="nom" /></p>
			</td>
			</tr>
			<tr>
			<td> <p>Password:
			</td>
			<td><input type="text" name="age" /></p>
			</td>
			</tr>
			<tr>
			<td>
			</td>
			<td><p><input type="submit" value="OK"></p>
			</td>
			</tr></table>
			
			 
			 
		
			
			
			</td>
        </tr>
    </tbody>
</table>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.36/dist/web3.min.js" integrity="sha256-nWBTbvxhJgjslRyuAKJHK+XcZPlCnmIAAMixz6EefVk=" crossorigin="anonymous"></script>
	   <script >
	   
	   		web3 = new Web3(web3.currentProvider);
          	var contract;
        
			var address = "0xb452Ba3D1df2763a6D2C192D5C6C3505A0Cb0aEB";
			var abi = [
	{
		"inputs": [],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "string",
				"name": "_msg",
				"type": "string"
			}
		],
		"name": "providerCreated",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "string",
				"name": "_msg",
				"type": "string"
			}
		],
		"name": "providerNotExist",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "string",
				"name": "_msg",
				"type": "string"
			}
		],
		"name": "providerlogged",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "id",
				"type": "uint256"
			},
			{
				"internalType": "address",
				"name": "addressProvider",
				"type": "address"
			},
			{
				"internalType": "string",
				"name": "entrepriseName",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "entreprisedomain",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "entreprisedescription",
				"type": "string"
			}
		],
		"name": "SignUp",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "KEY",
				"type": "address"
			}
		],
		"name": "logIn",
		"outputs": [
			{
				"internalType": "string",
				"name": "_string",
				"type": "string"
			}
		],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "srd",
		"outputs": [
			{
				"internalType": "contract SmartRegistryData",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "viewAllProviders",
		"outputs": [
			{
				"components": [
					{
						"internalType": "uint256",
						"name": "id",
						"type": "uint256"
					},
					{
						"internalType": "address",
						"name": "addressProvider",
						"type": "address"
					},
					{
						"internalType": "string",
						"name": "entrepriseName",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "entreprisedomain",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "entreprisedescription",
						"type": "string"
					}
				],
				"internalType": "struct SmartRegistryData.PROVIDER[]",
				"name": "",
				"type": "tuple[]"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
];
	   		var nbProv = 0;

$('#SignUp').click(function(){
	contract = new web3.eth.Contract(abi,address);
			web3 = new Web3(web3.currentProvider); 
			var adressP = $('#address').val();
			var nameENTR = $('#Ename').val();
			var descriEntre = $('#Edomaine').val();
			var domaineEntre = $('#Edescription').val();
			nbProv = nbProv+1;
			web3.eth.getAccounts().then(function(result){
			acc =  result[0];
			$('#msg').html("helooo wafa"+acc);
			return contract.methods.SignUp(nbProv,adressP,nameENTR,domaineEntre,descriEntre).send({from:0x351402cC720C7b43a3623D5d4bA241ACD0005834});
			}).then(function(tx){
				console.log(tx);
			}).catch(function(tx){
				console.log(tx);
			})
		  })
	   
	   
	   </script>
	
	</main>
	<footer class="footer">
		
	</footer>
</body>
</html>